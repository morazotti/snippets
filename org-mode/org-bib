# -*- mode: snippet -*-
# name: org-bib 
# key: bib
# type: command
# --


(let*
    ((processor
	(completing-read "Choose the processor: "
	    (list "basic" "csl" "bibtex" "natbib" "biblatex")))
     (style-list (cond
            ((string= processor "bibtex") (list "abbrv" "acm" "alpha" "apalike" "ieeetr" "plain" "siam" "unsrt"))
	     ((string= processor "biblatex")
		(list
		 "numeric"
		 "numeric-comp"
		 "numeric-verb"
		 "alphabetic"
		 "alphabetic-verb"
		 "authoryear"
		 "authoryear-comp"
		 "authoryear-ibid"
		 "authoryear-icomp"
		 "authortitle"
		 "authortitle-comp"
		 "authortitle-ibid"
		 "authortitle-icomp"
		 "authortitle-terse"
		 "authortitle-tcomp"
		 "authortitle-ticomp"
		 "verbose"
		 "reading"))
	     (t "")))
     (style (completing-read "Choose default style: " style-list)))
    (insert (format "#+cite_export: %s %s" processor style))
    (point-to-register ?q)
    (end-of-buffer)
    (insert "\n#+print_bibliography:")
    (jump-to-register ?q))
